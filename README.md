# Keyer (Carrot test)
***
## MVP-решение для кеинга статичной картинки с импользованием .NET Framework 4.8 и WPF
***
## Инструкция:
![interface](https://github.com/hentaibaka/Keyer-Carrot-test-/assets/61946499/c2782359-9546-42fb-a57b-b6a2e8857b24)
1. Исходное изображение.
2. Обработанное изображение.
3. Выбор цвета.
4. Пипетка - нажмите на кнопу, а затем кликните на пиксель нужного цвета на исходном изображении [1], выбранный цвет заменится на цвет выбранного пикселя.
5. Разброс - задаёт диапазон для выделения цвета ```ColorPicked - Delta <= ColorPixel <= ColorPicked + Delta``` (где ```ColorPicked``` - выбранный цвет, ```Delta``` - разброс, ```ColorPixel``` - цвет пикселя).
6. Сглаживание - позволяет сделать пиксели с большим кол-вом прозрачных соседних пикселей в определённом радиусе [6.i] более прозрачными [6.ii]. Данная настройка позволяет сделать градиент прозрачности на краях непрозрачных объектов, а также избавится от одиночных непрозрачных пикселей.
   1. Радиус сглаживания - позволяет задать радиус, в пределах которого будет производится поиск прозрачных пикселей. 
   2. Сила сглаживания - задаёт интенсивность прозрачности пикселей, рядом с которыми есть полностью прозрачные пиксели.
7. Показывать прозрачность - заменяет цветовые каналы изображения на канал прозрачности. Позволяет увидеть степень прозрачности пикселей (маску из фотошопа).
8. Применить - применяет настройки [3-7] к оригинальному изображению [1] и выводит новое обработанное изображение [2].
9. Отчистить - сбрасывает применённые к обработанному изображению [2] настройки [3-7].
10. Открыть - открывает диалоговое окно для загрузки изображения [1] в программу.
11. Сохранить - открывает диалоговое окно для сохранения обработанного изображения [2].
***
## Формат данных:
* Входные данные - ```.png``` файл без Альфа-канала.
* Выходные данные - ```.png``` файл с Альфа-каналом.
***
## Результаты:
* Исходный код - находится в этом [репозитории](./)
* ПО Keyer - находится в папке [Release](./Release/)
***
## Демонстрация работы:
Тестовые изображения можно посмотреть в папке [images](./images/)
| Изображение | Результат |
| :-| :- |
|![img_green_in](https://github.com/hentaibaka/Keyer-Carrot-test-/assets/61946499/e6e3205e-19fa-4110-821e-821a7753bcf2)|![img_green_out](https://github.com/hentaibaka/Keyer-Carrot-test-/assets/61946499/37f6b3b1-4082-4ff3-997c-665f0fd53046)|
|![test1](https://github.com/hentaibaka/Keyer-Carrot-test-/assets/61946499/d7bdb2aa-52d1-4699-8a59-4368d50d1488)|![test1_out](https://github.com/hentaibaka/Keyer-Carrot-test-/assets/61946499/12a9f8a5-996c-4325-8b8e-893db5a3a9a9)|
|![test_2](https://github.com/hentaibaka/Keyer-Carrot-test-/assets/61946499/dd611e47-e94a-4a90-9060-8575bb02a379)|![test_2_out](https://github.com/hentaibaka/Keyer-Carrot-test-/assets/61946499/ac207ec4-3e67-4a1c-be33-18ceb453f6c8)|
***
## Комментарии:
* Функционал:
> Не весь функционал для удобного удаления фона с изображения успел реализовать. Например, более гибкое управление диапазоном удаления цвета[5]. Хотелось бы сделать, чтобы можно было регулировать, удалять более светлые участки или более тёмные.\
> Ещё обязательно нужно реализовать возможность масштабирования изображений, чтобы разглядывать мелкие детали.\
> В идеале, сделать всё как в том же фотошопе, премьер про или афтер эффектс. Но я ещё не настолько преисполнен в своём познании цифровой обработке изображений, поэтому я понятия не имею как там всё работает "под капотом". Учиться, учиться и ещё раз учиться.
* Производительность:
> Она ужасна. Признаю, каюсь.\
> Во первых, стоило использовать сторонние библиотеки для обработки матриц и изображений (тот же OpenCV), однако, в какой-то момент всё превратилось в испытание самого себя. Мне захотелось реализовать всю логику обработки изображения самому.\
> Во вторых, когда речь заходит о матрицах или векторах, надо подключать к работе видеокарту. Я этого не сделал...
* Выводы:
> Мне этот проект понравился. В жизни у меня переодически возникает потребность удалить однотонный фон с изображения (на сайтик картинку без фона запилить), а в фотошоп лезть зачастую лень. Поэтому я планирую допилить то, что уже есть, для того чтобы реально это использовать.
